{
  "db_name": "PostgreSQL",
  "query": "SELECT\n  json_agg(artist_data) AS \"items: Json<Vec<Artist>>\"\nFROM (\n    SELECT\n        artist.gid AS Id,\n        array(\n            SELECT gid\n            FROM artist_gid_redirect\n            WHERE artist_gid_redirect.new_id = artist.id\n        ) AS OldIds,\n        artist.name AS ArtistName,\n        artist.sort_name AS SortName,\n        array(\n            SELECT name\n            FROM artist_alias\n            WHERE artist_alias.artist = artist.id\n              AND (artist_alias.type IS NULL OR artist_alias.type = 1)\n        ) AS ArtistAliases,\n        CASE WHEN artist.ended THEN 'ended' ELSE 'active' END AS Status,\n        artist.comment AS Disambiguation,\n        artist_type.name AS Type,\n        json_build_object(\n            'Count', COALESCE(artist_meta.rating_count, 0),\n            'Value', artist_meta.rating::decimal / 10\n        ) AS Rating,\n        array(\n            SELECT url.url\n            FROM url\n            JOIN l_artist_url ON l_artist_url.entity0 = artist.id\n                              AND l_artist_url.entity1 = url.id\n        ) AS Links,\n        array(\n            SELECT INITCAP(genre.name)\n            FROM genre\n            JOIN tag ON genre.name = tag.name\n            JOIN artist_tag ON artist_tag.tag = tag.id\n            WHERE artist_tag.artist = artist.id\n              AND artist_tag.count > 0\n        ) AS Genres\n    FROM artist\n    LEFT JOIN artist_type ON artist.type = artist_type.id\n    LEFT JOIN artist_meta ON artist.id = artist_meta.id\n    WHERE artist.gid > $1\n    ORDER BY artist.gid\n    LIMIT $2\n) artist_data;\n",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "items: Json<Vec<Artist>>",
        "type_info": "Json"
      }
    ],
    "parameters": {
      "Left": [
        "Uuid",
        "Int8"
      ]
    },
    "nullable": [
      null
    ]
  },
  "hash": "523db979f3c9cb3cd29b005edad32bc5538593153b50913490ede62add9debfc"
}
